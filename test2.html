<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script>
		onload = function(){
			HTMLElement.addGetter = function(name, func){
			    Object.defineProperty(this.prototype, name, {
			      configuable : true,
			      enumerable  : false,
			      get         : function(){
			           return func(this);
			      }
			    });
			    return this;
			};
			HTMLElement.addGetter('isElementNode', function(self){
				return !!(self && self.nodeType === 1);
			});

			HTMLElement.addGetter('preEleSibling', function(self){
			    var element = self;
			    while(element && (element = element.previousSibling) && !element.isElementNode) continue;
			    return element;
			});

			HTMLElement.addGetter('nextEleSibling', function(self){
				return self.nextElementSibling;
			});
			HTMLElement.addGetter('firstEleChild', function(self){
				return (self.firstChild.isElementNode)? 
				       self.firstChild : self.firstChild.nextElementSibling;
			});
		
			HTMLElement.addGetter('childEleNodes', function(self){
				var elements = [], element = self.firstElementChild;
				while(element){
					elements.push(element);
					element = element.nextElementSibling;
				}
				return elements;
			});
			HTMLElement.addGetter('desEleNodes', function(self){
				var elements = [];
				(function collectElements(elems){
					Array.prototype.push.apply(elements, elems);
					for(var i = 0; i < elems.length; i++){
						if(elems[i].childEleNodes){
							collectElements(elems[i].childEleNodes);
						}
					}
				})(self.childEleNodes);
				return elements;
			});
			  /*HTMLElement.prototype.descendantElements = function(){
			  	var desElements = [];
			  	(function collectElements(elements){
			  		Array.prototype.push.apply(desElements,elements);
			  		for(var i =0; i < elements.length; i++){
			  			if(elements[i].childElements()){
			  				collectElements(elements[i].childElements());
			  			}
			  		}
			  	})(this.childElements());
			  	return desElements || [];
			  }*/
			console.log(document.documentElement.desEleNodes);
		}
	</script>
</head>
<body>
	<div>hahaha</div>
	<div id='div'>
	    hello
		<div>world</div>
		<div>luoran</div>
	</div>
	<div>wuuwwuwuw</div>
</body>
</html>